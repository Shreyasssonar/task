<!DOCTYPE html>
<html>
<head>
    <title>API Integration - Create Customer</title>
    <style>
        form{
           display: flex;
           width: 100px;
        }
        input{
            border: 1px solid gray;
            padding: 10px;
            margin: 5px;
            border-radius: 5px;
            display: inline;
        }
        button{
            padding: 10px;
            background-color: rgb(104, 104, 195);
            border-radius: 5px;
            color:#fff;
        }
    </style>
</head>
<body>
    <h2>Create a New Customer</h2>
    <form id="createCustomerForm">
    <div>
        <input type="text" id="first_name" name="first_name" placeholder="First name" required><br>
        <input type="text" id="last_name" name="last_name" placeholder="last name" required><br>
    </div>
    <div>
        <input type="text" id="street" name="street" placeholder="street"><br>
        <input type text" id="address" name="address" placeholder="address"><br>
    </div>
    <div>
        <input type="text" id="city" name="city" placeholder="city"><br>
        <input type="text" id="state" name="state" placeholder="state"><br>
    </div>
    <div>
        <input type="email" id="email" name="email" placeholder="email"><br>
        <input type="tel" id="phone" name="phone" placeholder="phone"><br>
    </div>
    <br>
  
    </form>
    <div>
        <button type="button" onclick="createCustomer()">Create Customer</button>
    </div>
    <div id="createCustomerResult"></div>

    <script>
        function createCustomer() {
            const token = localStorage.getItem('token'); // Get the Bearer token obtained during authentication
            const first_name = document.getElementById("first_name").value;
            const last_name = document.getElementById("last_name").value;
            const street = document.getElementById("street").value;
            const address = document.getElementById("address").value;
            const city = document.getElementById("city").value;
            const state = document.getElementById("state").value;
            const email = document.getElementById("email").value;
            const phone = document.getElementById("phone").value;

            fetch('https://qa2.sunbasedata.com/sunbase/portal/api/assignment.jsp?cmd=create', {
                method: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + token,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    "first_name": first_name,
                    "last_name": last_name,
                    "street": street,
                    "address": address,
                    "city": city,
                    "state": state,
                    "email": email,
                    "phone": phone
                })
            })
            .then(response => {
                if (response.status === 201) {
                    document.getElementById('createCustomerResult').textContent = 'Customer created successfully.';
                } else if (response.status === 400) {
                    document.getElementById('createCustomerResult').textContent = 'Failed to create customer. First Name or Last Name is missing.';
                } else {
                    document.getElementById('createCustomerResult').textContent = 'An error occurred while creating the customer.';
                }
            })
            .catch(error => {
                document.getElementById('createCustomerResult').textContent = 'An error occurred: ' + error;
            });
        }
    </script>
</body>
</html>
